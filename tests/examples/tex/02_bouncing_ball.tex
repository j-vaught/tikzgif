% Example 02: Bouncing Ball
% Parabolic trajectory with shadow on the ground plane.
% Two full bounces with a fading trail of past positions.
% Parameter: \PARAM (time in range 0..1, two full bounce cycles)
% Range: 0 to 1, recommended 60 frames
% Difficulty: beginner
% Features demonstrated: mathematical expressions, shadows, trail effect
\documentclass[tikz]{standalone}
\usepackage{tikz}
\begin{document}
\begin{tikzpicture}
  \useasboundingbox (-0.5,-0.8) rectangle (10.5,5.5);

  % Ground
  \fill[black!10] (-0.5,-0.8) rectangle (10.5,0);
  \draw[thick] (-0.5,0) -- (10.5,0);

  % Helper macro: compute y height from global time t in [0,1]
  % Two bounces: local_t = frac(2*t), y = 4*4*local_t*(1-local_t)
  % x position is always linear: x = t * 10

  % Trail: draw past positions as fading circles
  \foreach \k in {1,2,...,15} {
    \pgfmathsetmacro{\tpast}{max(\PARAM - \k * 0.012, 0)}
    \pgfmathsetmacro{\xpast}{\tpast * 10}
    % local time for bounce: frac(2*t)
    \pgfmathsetmacro{\tlocal}{2*\tpast - floor(2*\tpast)}
    \pgfmathsetmacro{\ypast}{4 * 4 * \tlocal * (1 - \tlocal)}
    \pgfmathsetmacro{\opac}{0.35 * (1 - \k/16)}
    \pgfmathsetmacro{\sz}{0.28 * (1 - \k/20)}
    \fill[red!50!black, opacity=\opac] (\xpast, \ypast) circle (\sz);
  }

  % Current position
  \pgfmathsetmacro{\xpos}{\PARAM * 10}
  % Two bounces: local time wraps twice in [0,1]
  \pgfmathsetmacro{\tlocal}{2*\PARAM - floor(2*\PARAM)}
  \pgfmathsetmacro{\ypos}{4 * 4 * \tlocal * (1 - \tlocal)}

  % Ball
  \shade[ball color=red!70!black] (\xpos, \ypos) circle (0.35);

  % Label
  \node[below right, font=\small] at (0.2,5.2)
    {$t = \pgfmathprintnumber[fixed, precision=2]{\PARAM}$};
\end{tikzpicture}
\end{document}
